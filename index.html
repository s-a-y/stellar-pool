<hmtl>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Stellar mining pool</title>
    <script src="bower_components/jquery/dist/jquery.min.js" type="text/javascript"></script>
    <script src="bower_components/jquery-cookie/jquery.cookie.js" type="text/javascript"></script>
    <script src="bower_components/stellar-0.9.2-debug.js" type="text/javascript"></script>
    <script src="bower_components/bootstrap/js/collapse.js" type="text/javascript"></script>
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>
  </head>
  <body>
  <div class="container" role="main">
    <div class="alert" role="alert" style="display: none;" id="message"></div>
    <div class="col-sm-6 col-xs-12" style="margin-top: 20px;">
      <div class="panel panel-default">
        <div class="panel-body">
          <p class="lead">Estimated time of next Inflation: Unknown</p>
          <p>Unfortunately inflation doesn't work yet in a way it supposed to, track this bug report <a href="https://github.com/stellar/stellard/issues/56">on GitHub</a>. Once resolved we will be able to proceed</p>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-body">
          <!-- Begin MailChimp Signup Form -->
          <link href="//cdn-images.mailchimp.com/embedcode/classic-081711.css" rel="stylesheet" type="text/css">
          <style type="text/css">
            #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
            /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
               We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
          </style>
          <div id="mc_embed_signup">
            <form action="//umbrellab.us7.list-manage.com/subscribe/post?u=47c099383d09a5c9781d30e20&amp;id=213ce215d7" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
              <h2>Subscribe to get updates about the pool</h2>
              <div class="indicates-required"><span class="asterisk">*</span> indicates required</div>
              <div class="mc-field-group">
                <label for="mce-EMAIL">Email Address  <span class="asterisk">*</span>
                </label>
                <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
              </div>
              <div class="mc-field-group">
                <label for="mce-ADDRESS">Stellar username or address  <span class="asterisk">*</span>
                </label>
                <input type="text" value="" name="ADDRESS" class="required" id="mce-ADDRESS">
              </div>
              <div id="mce-responses" class="clear">
                <div class="response" id="mce-error-response" style="display:none"></div>
                <div class="response" id="mce-success-response" style="display:none"></div>
              </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
              <div style="position: absolute; left: -5000px;"><input type="text" name="b_47c099383d09a5c9781d30e20_213ce215d7" tabindex="-1" value=""></div>
              <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
            </form>
          </div>
          <script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='ADDRESS';ftypes[1]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
          <!--End mc_embed_signup-->
        </div>
      </div>

        <div class="panel panel-default">
          <div class="panel-heading"><b>Check if you are currently in the pool</b></div>
          <div class="panel-body">
        <form class="form-horizontal" id="check">
          <div class="input-group">
            <input class="form-control input-lg" type="text" placeholder="Your stellar address" name="account" id="address">
            <span class="input-group-btn">
              <button class="btn btn-lg btn-primary" type="submit">Check</button>
            </span>
          </div>
        </form>
          </div>
        </div>

      <div class="panel panel-default">
        <div class="panel-heading"><b>Join pool</b></div>
        <div class="panel-body">
        <p class="lead">For those, who cannot execute command locally on their computer for some reason.</p>
        <p class="alert alert-danger">Attention! Never enter you secret key anywhere in the internet, e.g. forms like this one.<br/> I'm not gonna steal anyone's keys, but others may. <br/>Functionality offered without warranty of any kind</p>
        <form class="form-horizontal" id="form">
          <div class="form-group">
            <label for="account" class="col-sm-2 control-label">Account</label>
            <div class="col-sm-10">
              <input class="form-control" type="text" placeholder="Your stellar address" name="account" id="account">
            </div>
          </div>
          <div class="form-group">
            <label for="secret" class="col-sm-2 control-label">Secret</label>
            <div class="col-sm-10">
              <input class="form-control" type="password" placeholder="Your stellar secret" name="secret" id="secret">
            </div>
          </div>
          <button class="btn btn-lg btn-success" type="submit">Join us!</button>
        </form>
        </div>
      </div>
      </div>
    <div class="col-sm-6 col-xs-12" style="margin-top: 20px;">
      <div class="panel panel-default">
        <div class="panel-heading"><b>Some stats (not real time, calculated August 10, 2014)</b></div>
        <div class="panel-body">
          <p><b>New pool members:</b><ul>
          <li>August 04 - 4 new members</li>
          <li>August 05 - 6 new members</li>
          <li>August 06 - 102 new members</li>
          <li>August 07 - 43 new members</li>
          <li>August 08 - 75 new members</li>
          <li>August 09 - 87 new members</li>
          <li>August 10 - 33 new members</li>
        </ul>
          <b>Total pool members:</b> 350</p>
          <p><b>Pool voting power:</b> 4.1 mln votes</p>
          <p><b>Number of members, who left the pool after joining it:</b> 1</p>
        </div>
      </div>
      <!--<div class="panel panel-default">-->
        <!--<div class="panel-heading"><b>Latest news</b></div>-->
        <!--<div class="panel-body">-->
          <!---->
        <!--</div>-->
      <!--</div>-->
      <h3>FAQ</h3>
      <div class="panel-group" id="accordion">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                How it works?
              </a>
            </h4>
          </div>
          <div id="collapseOne" class="panel-collapse collapse in">
            <div class="panel-body">
              <p>Stellar has Inflation (1% per annum), which distributed weekly between 50 most voted accounts (or less if any of them passes 1.5% of total STR number).</p>
              <p>We join together and vote for the same account to get the credit. If our pool is among the winners of Inflation credit - reward will be distributed between pool members proportionally to their voting power.</p>
              <p>Voting power is your wallet balance at the moment of Inflation distribution.</p>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapseOnePointHalf">
                How to join
              </a>
            </h4>
          </div>
          <div id="collapseOnePointHalf" class="panel-collapse collapse">
            <div class="panel-body">
              Recommended way to join the pool is to run console command on your computer
              <pre>
curl -X POST https://live.stellar.org:9002 -d '{
  "method": "submit",
  "params": [{
    "secret": "Your secret goes here",
    "tx_json": {
      "Account": "You address goes here",
      "InflationDest": "gaj43wzt5XD8fz6JfbnaVQsewLtdfU5cFK",
      "TransactionType": "AccountSet"
    }
  }]
}'</pre>
              <p>You can find your address inside the wallet client if you go to "Receive" -> "Show your Stellar address"
              To find secret click to your username in top-right corner and there in the settings "Reveal" your secret key.</p>

              <p>To execute it on windows, you may need to install Git: http://git-scm.com/download/win
              and then open PowerShell console to run the command. (maybe escape every quotes with backslash, like \"method\": \"submit\"...)</p>

              <div class="alert alert-info">If you are not a technical person - just use the form "Join the pool" on this page.
                However it's not recommended, because it requires your secret key - information which you should keep private and never share with anyone in the internet</div>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                Who's running the pool?
              </a>
            </h4>
          </div>
          <div id="collapseTwo" class="panel-collapse collapse">
            <div class="panel-body">
              I'm Software developer and Enterpreneur, interested in Bitcoin and other rivals. Ripple was one of my favorites before Stellar.<br/>
              Currently this page is far from perfect, because I have extreme lack of time.
              <a href="https://stellartalk.org/user/662-umbrel/">Find me on Stellartalk.org</a><br/>
              <a href="https://github.com/s-a-y/stellar-pool">This website on GitHub</a> (feel free to create issues and contribute)
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                What are future plans for this?
              </a>
            </h4>
          </div>
          <div id="collapseThree" class="panel-collapse collapse">
            <div class="panel-body">
              <p>I'm interested to see if we can win the Inflation challenge, and if reward worth it.</p>
              <p>If experiment will be successful - I'll be developing this pool further, tons of things could be done:
              Voting power stats, Stellar network list of leaders by voting power, graphs and other analytics.</p>
              <p>For time being everything is free. Members will get 100% of rewarded Stellars, but I don't exclude possibility to switch to commercial basis in the future.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53634406-1', 'auto');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');

    $(function() {
      if($.cookie("address")) ga('set', '&uid', $.cookie("address"));

      $(document).on("submit", "#form", function() {
        var uid = $("input[name=account]").val().trim();
        $.cookie("address", uid);
        ga('set', '&uid', uid);
        $.post("https://live.stellar.org:9002", "{\"method\":\"submit\",\"params\":[{\"secret\": \""+
          $("input[name=secret]").val().trim()+"\",\"tx_json\":{\"TransactionType\":\"AccountSet\",\"Account\":\""+
          uid+"\",\"InflationDest\":\"gaj43wzt5XD8fz6JfbnaVQsewLtdfU5cFK\"}}]}",
          function(data) {
            if(data.result.status == "success") {
              $("#message").addClass("alert-success").html("You successfully joined the pool from account "+uid).show();

            } else {
              $("#message").addClass("alert-danger").html("Error occured, check your account address and secret key, if everything correct - let me know about the problem to s@umbrellab.com").show();
              console.log(data);
            }
          }, "json"
        );
        return false;
      })
        .on("submit", "#check", function() {
          var uid = $("#address").val().trim();
          var Remote = stellar.Remote;
          var remote = new Remote({
            "trusted" : true,
            "websocket_ip" : "live.stellar.org",
            "websocket_port" : 9001,
            "websocket_ssl" : true
          }, true);
          remote.connect(function() {
            remote.requestAccountInfo(uid, function(er, data) {
              console.log(er);
              console.log(data);
              if(er) $("#message").addClass("alert-danger").html("Sorry, Stellar server responded with error \""+er.remote.error_message+"\". Please, try again later").show();
              if(data.account_data.InflationDest == "gaj43wzt5XD8fz6JfbnaVQsewLtdfU5cFK")
                $("#message").addClass("alert-success").html("Yes, you are in the pool").show();
              else
                $("#message").addClass("alert-danger").html("No, you currently vote for "+data.account_data.InflationDest).show();
            });
          });
          return false;
        });

    });
  </script>
  </body>
</hmtl>